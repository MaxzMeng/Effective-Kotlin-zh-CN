## 第18条：尊重编码规范

Kotlin有着在文档中详细描述的成熟编码规范，这部分被恰当地称为“编码规范”。**这些规范并不适用于所有项目，但对我们这个社区来说，最好的方式是在所有项目中都遵守这些规范。**多亏了这些规范：

- 在项目之间切换更容易
- 代码对外部开发者来说更易读
- 更容易猜测代码如何运行
- 更容易将代码与公共仓库合并，或者将代码的某些部分从一个项目移动到另一个项目

程序员应该熟悉文档中描述的这些规范。他们也应该在规范变化时尊重这些规范 - 这可能会在一定程度上随着时间的推移发生。由于这两者都很难做到，所以有两个工具可以帮助：

- IntelliJ格式化器可以设置为自动按照官方编码规范样式进行格式化。为此，转到设置 | 编辑器 | 代码样式 | Kotlin，点击右上角的“Set from…”链接，并从菜单中选择“预定义样式 / Kotlin样式指南”。
- ktlint - 流行的linter，可以分析你的代码并通知你所有的编码规范违规情况。

看看Kotlin项目，我发现大多数项目都与大多数规范直观地一致。这可能是因为Kotlin主要遵循Java编码规范，而大多数现在的Kotlin开发者都是Java开发者。我经常看到被违反的一条规则是类和函数应该如何格式化。根据规范，带有短主构造函数的类可以在一行中定义：

```
class FullName(val name: String, val surname: String)
```

然而，带有许多参数的类应该格式化，使得每个参数都在另一行，且第一行没有参数：
``` kotlin
class Person(
    val id: Int = 0,
    val name: String = "",
    val surname: String = ""
) : Human(id, name) { 
    // 主体
}
```

同样，这是我们如何格式化一个长函数的方式：

``` kotlin
public fun <T> Iterable<T>.joinToString(
    separator: CharSequence = ", ", 
    prefix: CharSequence = "", 
    postfix: CharSequence = "", 
    limit: Int = -1, 
    truncated: CharSequence = "...", 
    transform: ((T) -> CharSequence)? = null
): String {
   // ...
}
```

注意，这两种方式与将第一个参数留在同一行，然后将所有其他参数缩进到它的约定非常不同。

``` kotlin
// 不要这样做
class Person(val id: Int = 0,
             val name: String = "",
             val surname: String = "") : Human(id, name){ 
    // 主体
}
```

这可能会有两个问题：

- 每个类的参数都以类名不同的缩进开始。此外，当我们更改类名时，我们需要调整所有主构造函数参数的缩进。
- 这样定义的类仍然过于宽泛。这种方式定义的类的宽度是类名、`class`关键字和最长的主构造函数参数，或者最后一个参数加上超类和接口。

一些团队可能决定使用稍微不同的约定。这没问题，但那么这些约定应该在整个项目中得到尊重。**每个项目看起来都应该像是由一个人编写的，而不是一群人在互相斗争。**

编码约定通常不被开发者足够尊重，但它们很重要，而且在最佳实践书籍中关于可读性的章节中，不能没有至少一个简短的部分专门讨论它们。阅读它们，使用静态检查器帮助你与它们保持一致，将它们应用在你的项目中。通过尊重编码约定，我们使Kotlin项目对我们所有人都更好。